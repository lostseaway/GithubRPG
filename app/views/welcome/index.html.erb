<script type="text/javascript">
	$(document).ready(function () {
    $(".ex_users").click(function () {
		var i_id = $(this).attr('id')
		$(".container").html('<%= image_tag "loading.gif" %>')
		setTimeout(function () {
		        window.location.replace("/user/"+i_id);
		    }, 100);
    })
});
</script>

<script type="text/javascript" src="https://www.google.com/jsapi"></script>
<script type="text/javascript">
  google.load("visualization", "1", {packages:["geochart"]});
  google.setOnLoadCallback(drawRegionsMap);

  function drawRegionsMap() {

    var data = google.visualization.arrayToDataTable([
      ['Country', 'Popularity'],
      <% @user_country.each do |x| %>
      ['<%=x[1]%>',<%=x[0]%>],
      <%end%>
    ]);

    var options = {};

    var chart = new google.visualization.GeoChart(document.getElementById('regions_div'));

    chart.draw(data, options);
  }
</script>
<script type="text/javascript">
  google.load("visualization", "1", {packages:["corechart",'line']});
  google.setOnLoadCallback(drawChart);
  function drawChart() {
    var data = google.visualization.arrayToDataTable([
      ['Language', 'No. of Project'],
      <% @project_lang.each do |item|%>
      ["<%= item[1]%>",  <%= item[0]%>],
     <%end%>
    ]);

  var options = {
  	title: 'Project Language',
    pieHole: 0.4,
  };

    var chart = new google.visualization.PieChart(document.getElementById('chart_lang'));
    chart.draw(data, options);
  }
</script>
<%=render "layouts/header"%>
<div class="container">
	<div class="col-md-3">
		<table class='table table-bordered table-hover'>
				<thead>
					<tr>
						<th>Some Users!</th>
					</tr>
				</thead>
			   <tbody>
			   <% @show_users.each do |item|%>
			   		<tr class='ex_users' id="<%=item%>">
			   			<td><h5><%=item%></h5></td>
			   		</tr>
			   <% end %>
			   	<tr>
		   			<td><small>More...</small></td>
			   	</tr>
			</tbody>
		</table>
	</div>

	<div class="col-md-8">
		<div class="panel panel-default">
			<div class="panel-heading">
				<h4>Site Statistic</h4>
			</div>
			<div class="panel-body">
				<h3><%=@number_user%> users in our database</h3>
				<div id="regions_div" style="width:100%"></div>
				<h3><%=@number_repo%> repositories in our database</h3>

				<div id="chart_lang" style="width: 50%;"></div>

			</div>
		</div>
	</div>
</div>
