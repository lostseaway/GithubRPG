
<script type="text/javascript">
	$(document).ready(function () {
	    $(".ex_users").click(function () {
			var i_id = $(this).attr('id')
			$(".container").html('<%= image_tag "loading.gif" %>')
			setTimeout(function () {
			        window.location.replace("/user/"+i_id);
			    }, 100);
	    })

	    $(function  () {
		  $("ol.example").sortable();
		})

		$(function (){
			var adjustment;

			$("ol.simple_with_animation").sortable({
			  group: 'simple_with_animation',
			  pullPlaceholder: false,
			  // animation on drop
			  onDrop: function  ($item, container, _super) {
			    var $clonedItem = $('<li/>').css({height: 0});
			    $item.before($clonedItem);
			    $clonedItem.animate({'height': $item.height()});

			    $item.animate($clonedItem.position(), function  () {
			      $clonedItem.detach();
			      _super($item, container);
			    });
			  },

			  // set $item relative to cursor position
			  onDragStart: function ($item, container, _super) {
			    var offset = $item.offset(),
			        pointer = container.rootGroup.pointer;

			    adjustment = {
			      left: pointer.left - offset.left,
			      top: pointer.top - offset.top
			    };

			    _super($item, container);
			  },
			  onDrag: function ($item, position) {
			    $item.css({
			      left: position.left - adjustment.left,
			      top: position.top - adjustment.top
			    });
			  }
			});
		})
});
</script>

<script type="text/javascript" src="https://www.google.com/jsapi"></script>

<script type="text/javascript">
  google.load("visualization", "1", {packages:["geochart"]});
  google.setOnLoadCallback(drawRegionsMap);

  function drawRegionsMap() {

    var data = google.visualization.arrayToDataTable([
      ['Country', 'Popularity'],
      <% @user_country.each do |x| %>
      ['<%=x[1]%>',<%=x[0]%>],
      <%end%>
    ]);

    var options = {};

    var chart = new google.visualization.GeoChart(document.getElementById('regions_div'));

    chart.draw(data, options);
  }
</script>
<script type="text/javascript">
  google.load("visualization", "1", {packages:["corechart",'line']});
  google.setOnLoadCallback(drawChart);
  function drawChart() {
    var data = google.visualization.arrayToDataTable([
      ['Language', 'No. of Project'],
      <% @project_lang.each do |item|%>
      ["<%= item[1]%>",  <%= item[0]%>],
     <%end%>
    ]);

  var options = {
  	title: 'Project Language',
    pieHole: 0.4,
  };

    var chart = new google.visualization.PieChart(document.getElementById('chart_lang'));
    chart.draw(data, options);
  }
</script>

<%=render "layouts/header"%>
<div class="container">
	<div class="col-md-3">
		<table class='table table-bordered table-hover'>
				<thead>
					<tr>
						<th>Some Users!</th>
					</tr>
				</thead>
			   <tbody>
			   <% @show_users.each do |item|%>
			   		<tr class='ex_users' id="<%=item%>">
			   			<td><h5><%=item%></h5></td>
			   		</tr>
			   <% end %>
			   	<tr>
		   			<td><small>More...</small></td>
			   	</tr>
			</tbody>
		</table>
	</div>

	<div class="col-md-8">
		<div class="panel panel-default">
			<div class="panel-heading">
				<h4>Look for Developer!</h4>
			</div>
			<div class="panel-body">
				<div class="col-md-6 col-xs-6">
					<h3>Requirements</h3>
					<ol class='simple_with_animation vertical list-group'>
					  <li class="list-group-item">
					  	Most Prefer Language : 
					  	<select class="form-control input-sm">
					  		<% @project_lang = @project_lang.sort_by{|x| x[1]}%>
					  		<option selected><%= @project_lang[0][1]%>
					  		<% @project_lang[1..-1].each do |x| %>
							<option><%=x[1]%>
							<%end%>
						</select>
					  </li>
					  
					</ol>

					<button type="button" class="btn btn-primary">Go!!</button>
				</div>

				<div class="col-md-6 col-xs-6">
					<h3>Options</h3>
					<ol class="simple_with_animation vertical list-group">
						<li class="list-group-item">
							Followers > : 
							<input type="text" class="form-control" size='10'></input>
						</li>
						<li class="list-group-item">
							Location : 
							<select class="form-control input-sm">
								<%@user_country = @user_country.sort_by{|x| x[1]}%>
								<option selected><%= @user_country[0][1]%>
						  		<% @user_country[1..-1].each do |x| %>
								<option><%=x[1]%>
								<%end%>
							</select>
						</li>
						<li class="list-group-item">Join Github Since (Year) : 
							<input type="text" class="form-control">
						</li>
						<li class="list-group-item">Join Github > (Month) :
							<input type="text" class="form-control">
						</li>
					</ol>
				</div>
			</div>
		</div>

		<div class="panel panel-default">
			<div class="panel-heading">
				<h4>Site Statistic</h4>
			</div>
			<div class="panel-body">
				<h3><%=@number_user%> users in our database</h3>
				<div id="regions_div" style="width:100%"></div>
				<h3><%=@number_repo%> repositories in our database</h3>

				<div id="chart_lang" style="width: 50%;"></div>

			</div>
		</div>
	</div>
</div>
